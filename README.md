# Allure Failure Analyzer
A powerful command-line tool to analyze Allure test reports, intelligently group failures, and generate a modern, interactive HTML dashboard to help you identify the root causes of your test failures quickly.

<!-- It's recommended to add a real screenshot URL here -->

## Overview
Running hundreds or thousands of automated tests can generate a massive amount of data. Sifting through failed tests to find the real, underlying issues is time-consuming and inefficient. This tool automates that process.

It scans your allure-results directory, extracts detailed information about every single failed or broken step within your tests, and uses a smart "fingerprinting" algorithm to group similar failures together. The final output is a clean, filterable, and easy-to-read HTML report that highlights your most critical issues, allowing you to focus your debugging efforts where they matter most.

## Features
- **Deep Failure Analysis:** Scans the entire JSON structure, including nested steps and attachments, to find the true source of every failure.
- **Intelligent Grouping:** Uses a customizable "fingerprinting" logic to group failures by their root cause, not just by test name.
- **Rich Interactive HTML Report:** Generates a single, self-contained HTML file with features like:
  - Dark/Light mode toggle.
  - Real-time search and filtering.
  - Collapsible sections for each failure group.
  - Stacked progress bars showing the ratio of Failed (Assertion Errors) vs. Broken (Technical Errors).
- **Efficient & Fast:** Uses parallel processing to analyze thousands of test results in seconds.
- **Highly Configurable:** All major settings are controlled via a simple config.yaml file.
- **User-Friendly:** Includes a built-in web server to automatically open and serve the report for you.

## Project Structure
allure-analyzer/
├── analyzer/
│   ├── __init__.py         # Makes 'analyzer' a Python package
│   ├── ingestion.py        # Module for fast, parallel data loading from Allure results
│   ├── fingerprinter.py    # Core logic for creating failure fingerprints
│   └── reporting.py        # Module for generating the final JSON data file
├── config.yaml             # Main configuration file - THIS IS WHERE YOU SET YOUR PATHS
├── main.py                 # The main script to run the tool
├── report.html             # The static HTML template for the report
└── requirements.txt        # Project dependencies

## Prerequisites
Python 3.7+

pip (Python package installer)

## Installation & Setup
Clone or Download: Get the project files onto your local machine.

Create a Virtual Environment (Recommended):

python -m venv .venv
source .venv/bin/activate  # On Windows, use `.venv\Scripts\activate`

Install Dependencies:

pip install -r requirements.txt

## Configuration
Before running the tool, you must configure the config.yaml file.

# Path to the Allure results directory generated after a test run.
# This is the most important setting.
allure_results_directory: './allure-results'

# The base name for the output report files (e.g., 'failure_analysis_report').
# The tool will generate a .json and an .html file with this name.
output_report_file: 'failure_analysis_report.html'

# The number of top failure groups to include in the report.
# Use 0, -1, or any negative number to include ALL groups.
top_n_groups_to_report: 20

## Usage
Running the analyzer is a simple, two-step process.

Run the Main Script:
Execute the main.py script from your terminal in the project's root directory.

python main.py

The script will scan the directory specified in your config, process the data, and generate a failure_analysis_report.json file.

View the Report:
After generating the data, the script will ask you if you want to open the report:

❔ Do you want to open the report 'report.html' now? (y/n):

Type y and press Enter.

The tool will start a local web server and automatically open the report in your default browser.

To stop the server, go back to the terminal and press Ctrl+C.

If you choose n, you can always start the server manually later by running python -m http.server and navigating to http://localhost:8000/report.html.

## How It Works
The tool operates in three main stages:

Ingestion (ingestion.py):

Scans the allure-results directory in parallel.

For each test, it performs a deep, recursive search through all steps and attachments.

It collects every single failed or broken step, ensuring no error is missed.

Fingerprinting (fingerprinter.py):

For each collected failure, it creates a unique "fingerprint" string.

This fingerprint is generated by analyzing the error message and stack trace to find the root cause, ignoring dynamic data like IDs, timestamps, or file paths.

This allows the tool to group technically different errors that share the same root cause.

Reporting (reporting.py & report.html):

The script groups all failures by their fingerprint.

It then generates a failure_analysis_report.json file containing the structured data for all the groups.

The report.html file reads this JSON data and dynamically builds the interactive dashboard in your browser.

This tool was built to turn raw test data into actionable insights. Happy debugging!
